(function(e){function t(t){for(var c,o,l=t[0],d=t[1],i=t[2],s=0,u=[];s<l.length;s++)o=l[s],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&u.push(a[o][0]),a[o]=0;for(c in d)Object.prototype.hasOwnProperty.call(d,c)&&(e[c]=d[c]);m&&m(t);while(u.length)u.shift()();return r.push.apply(r,i||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],c=!0,o=1;o<n.length;o++){var l=n[o];0!==a[l]&&(c=!1)}c&&(r.splice(t--,1),e=d(d.s=n[0]))}return e}var c={},o={app:0},a={app:0},r=[];function l(e){return d.p+"js/"+({}[e]||e)+"."+{"chunk-079a5944":"73a7b6c6","chunk-2016e538":"6a9b2f3f"}[e]+".js"}function d(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,d),n.l=!0,n.exports}d.e=function(e){var t=[],n={"chunk-079a5944":1,"chunk-2016e538":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var c="css/"+({}[e]||e)+"."+{"chunk-079a5944":"36f9a4c1","chunk-2016e538":"8fed4add"}[e]+".css",a=d.p+c,r=document.getElementsByTagName("link"),l=0;l<r.length;l++){var i=r[l],s=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(s===c||s===a))return t()}var u=document.getElementsByTagName("style");for(l=0;l<u.length;l++){i=u[l],s=i.getAttribute("data-href");if(s===c||s===a)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var c=t&&t.target&&t.target.src||a,r=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=c,delete o[e],m.parentNode.removeChild(m),n(r)},m.href=a;var b=document.getElementsByTagName("head")[0];b.appendChild(m)})).then((function(){o[e]=0})));var c=a[e];if(0!==c)if(c)t.push(c[2]);else{var r=new Promise((function(t,n){c=a[e]=[t,n]}));t.push(c[2]=r);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,d.nc&&s.setAttribute("nonce",d.nc),s.src=l(e);var u=new Error;i=function(t){s.onerror=s.onload=null,clearTimeout(m);var n=a[e];if(0!==n){if(n){var c=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+c+": "+o+")",u.name="ChunkLoadError",u.type=c,u.request=o,n[1](u)}a[e]=void 0}};var m=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(t)},d.m=e,d.c=c,d.d=function(e,t,n){d.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},d.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,t){if(1&t&&(e=d(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(d.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)d.d(n,c,function(t){return e[t]}.bind(null,c));return n},d.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return d.d(t,"a",t),t},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.p="/Vue_week7/",d.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var m=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},5572:function(e,t,n){"use strict";n("f3f6")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23");function o(e,t){var n=Object(c["resolveComponent"])("router-view");return Object(c["openBlock"])(),Object(c["createBlock"])(n)}n("b14e");var a=n("d959"),r=n.n(a);const l={},d=r()(l,[["render",o]]);var i=d,s=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),u={class:"home"};function m(e,t,n,o,a,r){var l=Object(c["resolveComponent"])("HelloWorld");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",u,[Object(c["createVNode"])(l,{msg:"Welcome to Your Vue.js App"})])}var b=n("fdab"),p={name:"Home",components:{HelloWorld:b["default"]}};const O=r()(p,[["render",m]]);var j=O,h={class:"container"},f=Object(c["createElementVNode"])("h1",null,"預計是用來介紹網站的頁面",-1),g=[f];function v(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",h,g)}const E={},V=r()(E,[["render",v]]);var N=V,k={class:"container"},y={class:"row mt-3"},w=Object(c["createElementVNode"])("div",{class:"col-3"},[Object(c["createElementVNode"])("h2",null,"產品分類列表"),Object(c["createElementVNode"])("ul",null,[Object(c["createElementVNode"])("li",null,"全部"),Object(c["createElementVNode"])("li",null,"淺焙"),Object(c["createElementVNode"])("li",null,"中焙"),Object(c["createElementVNode"])("li",null,"深焙"),Object(c["createElementVNode"])("li",null,"馬克杯"),Object(c["createElementVNode"])("li",null,"磨豆機"),Object(c["createElementVNode"])("li",null,"咖啡機")])],-1),x={class:"col-9"};function C(e,t,n,o,a,r){var l=Object(c["resolveComponent"])("ProductsList");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",k,[Object(c["createElementVNode"])("div",y,[w,Object(c["createElementVNode"])("div",x,[Object(c["createVNode"])(l)])])])}var B={class:"table align-middle"},M=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,"圖片"),Object(c["createElementVNode"])("th",null,"商品名稱"),Object(c["createElementVNode"])("th",null,"價格"),Object(c["createElementVNode"])("th")])],-1),L={style:{width:"200px"}},D={key:0,class:"h5"},P={key:1},S={class:"h6"},_={class:"h5"},I={class:"btn-group btn-group-sm"},U=Object(c["createTextVNode"])("查看更多"),T=["onClick","disabled"],R={class:"spinner-grow spinner-grow-sm"},F=Object(c["createTextVNode"])(" 加到購物車 ");function $(e,t,n,o,a,r){var l=Object(c["resolveComponent"])("Loading"),d=Object(c["resolveComponent"])("router-link"),i=Object(c["resolveComponent"])("ProductModal");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(l,{active:a.isLoading},null,8,["active"]),Object(c["createElementVNode"])("table",B,[M,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.products,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:e.id},[Object(c["createElementVNode"])("td",L,[Object(c["createElementVNode"])("div",{style:Object(c["normalizeStyle"])([{backgroundImage:"url(".concat(e.imageUrl,")")},{width:"100px",height:"150px","background-size":"cover","background-position":"center"}])},null,4)]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.title),1),Object(c["createElementVNode"])("td",null,[e.price===e.origin_price?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",D,Object(c["toDisplayString"])(e.price)+" 元",1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",P,[Object(c["createElementVNode"])("del",S,"原價 "+Object(c["toDisplayString"])(e.origin_price)+" 元",1),Object(c["createElementVNode"])("div",_,"現在只要 "+Object(c["toDisplayString"])(e.price)+" 元",1)]))]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",I,[Object(c["createVNode"])(d,{type:"button",class:"btn btn-outline-secondary",to:"/product/".concat(e.id)},{default:Object(c["withCtx"])((function(){return[U]})),_:2},1032,["to"]),Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-danger",onClick:function(t){return r.addToCart(e.id)},disabled:a.isLoadingItem===e.id},[Object(c["withDirectives"])(Object(c["createElementVNode"])("span",R,null,512),[[c["vShow"],a.isLoadingItem===e.id]]),F],8,T)])])])})),128))])]),Object(c["createVNode"])(i,{id:a.productId,onCloseModal:r.hideModal},null,8,["id","onCloseModal"])],64)}n("99af");var q=n("bc3a"),A=n.n(q),z=(n("a4d3"),n("e01a"),{id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"}),J={class:"modal-dialog modal-xl"},H={class:"modal-content border-0"},W={class:"modal-header bg-primary text-white"},K={id:"productModalLabel",class:"modal-title"},Y={class:"modal-body"},G={class:"row"},Q={class:"col-sm-4"},X={class:"mb-2"},Z=["src"],ee={class:"col-sm-8"},te={class:"row"},ne={class:"mb-3"},ce={class:"badge bg-primary rounded-pill"},oe={class:"mb-3"},ae={class:"mb-3 text-end"},re={class:"modal-footer"},le=["value"],de=Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function ie(e,t,n,o,a,r){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",z,[Object(c["createElementVNode"])("div",J,[Object(c["createElementVNode"])("div",H,[Object(c["createElementVNode"])("div",W,[Object(c["createElementVNode"])("h5",K,[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(a.product.title),1)])]),Object(c["createElementVNode"])("div",Y,[Object(c["createElementVNode"])("div",G,[Object(c["createElementVNode"])("div",Q,[Object(c["createElementVNode"])("div",X,[Object(c["createElementVNode"])("img",{class:"img-fluid",src:a.product.imageUrl,alt:""},null,8,Z)])]),Object(c["createElementVNode"])("div",ee,[Object(c["createElementVNode"])("div",te,[Object(c["createElementVNode"])("div",ne,[Object(c["createElementVNode"])("p",ce,"分類："+Object(c["toDisplayString"])(a.product.category),1)]),Object(c["createElementVNode"])("div",oe,[Object(c["createElementVNode"])("p",null,"商品內容："+Object(c["toDisplayString"])(a.product.description),1)]),Object(c["createElementVNode"])("div",ae,[Object(c["createElementVNode"])("h6",null,[Object(c["createElementVNode"])("del",null,"原價："+Object(c["toDisplayString"])(a.product.origin_price),1)]),Object(c["createElementVNode"])("h4",null,"特價："+Object(c["toDisplayString"])(a.product.price),1)])])])])]),Object(c["createElementVNode"])("div",re,[Object(c["withDirectives"])(Object(c["createElementVNode"])("select",{id:"",class:"form-select w-auto","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.qty=e})},[(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(20,(function(e){return Object(c["createElementVNode"])("option",{value:e,key:"".concat(e)},Object(c["toDisplayString"])(e),9,le)})),64))],512),[[c["vModelSelect"],a.qty]]),de,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=function(e){return r.addToCart(n.id)})},"加入購物車")])])])],512)}var se="https://vue3-course-api.hexschool.io/v2",ue="ashen",me={props:["id"],data:function(){return{product:{},qty:1}},methods:{addToCart:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c={product_id:e,qty:this.qty|n};this.isLoadingItem=e,A.a.post("".concat(se,"/api/").concat(ue,"/cart"),{data:c}).then((function(e){console.log(e),t.isLoadingItem="",t.$emit("closeModal")}))}},watch:{id:function(e){var t=this;A.a.get("".concat(se,"/api/").concat(ue,"/product/").concat(e)).then((function(e){console.log(e.data.product),t.product=e.data.product}))}}};const be=r()(me,[["render",ie]]);var pe=be,Oe=n("7c2b"),je=n.n(Oe),he=n("9062"),fe=n.n(he),ge=(n("e40d"),"https://vue3-course-api.hexschool.io/v2"),ve="ashen",Ee={components:{ProductModal:pe,Loading:fe.a},data:function(){return{products:[],productId:null,isLoadingItem:"",isLoading:!1}},methods:{openProductModal:function(e){this.productId=e,this.productModal.show()},addToCart:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c={product_id:e,qty:n};this.isLoadingItem=e,A.a.post("".concat(ge,"/api/").concat(ve,"/cart"),{data:c}).then((function(e){console.log(e),t.isLoadingItem=""}))},hideModal:function(){this.productModal.hide()}},mounted:function(){var e=this;this.isLoading=!0,A.a.get("".concat(ge,"/api/").concat(ve,"/products/all")).then((function(t){e.products=t.data.products,e.isLoading=!1})),this.productModal=new je.a(document.getElementById("productModal"),{keyboard:!1})}};const Ve=r()(Ee,[["render",$]]);var Ne=Ve,ke={components:{ProductsList:Ne}};const ye=r()(ke,[["render",C]]);var we=ye,xe={class:"container"},Ce={class:"row mt-3"},Be={class:"col-8"},Me={class:"col-4"};function Le(e,t,n,o,a,r){var l=Object(c["resolveComponent"])("ShoppingCart"),d=Object(c["resolveComponent"])("ValidateForm");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",xe,[Object(c["createElementVNode"])("div",Ce,[Object(c["createElementVNode"])("div",Be,[Object(c["createVNode"])(l)]),Object(c["createElementVNode"])("div",Me,[Object(c["createVNode"])(d)])])])}n("b0c0");var De={class:"mb-3"},Pe=Object(c["createElementVNode"])("label",{for:"email",class:"form-label"},"Email",-1),Se={class:"mb-3"},_e=Object(c["createElementVNode"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),Ie={class:"mb-3"},Ue=Object(c["createElementVNode"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),Te={role:"alert",class:"invalid-feedback"},Re={class:"mb-3"},Fe=Object(c["createElementVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1),$e={class:"mb-3"},qe=Object(c["createElementVNode"])("label",{for:"message",class:"form-label"},"留言",-1),Ae={class:"text-end"},ze=["disabled"];function Je(e,t,n,o,a,r){var l=Object(c["resolveComponent"])("Field"),d=Object(c["resolveComponent"])("ErrorMessage"),i=Object(c["resolveComponent"])("Form");return Object(c["openBlock"])(),Object(c["createBlock"])(i,{ref:"form",autocomplete:"off",onSubmit:r.onSubmit},{default:Object(c["withCtx"])((function(e){var n=e.errors;return[Object(c["createElementVNode"])("div",De,[Pe,Object(c["createVNode"])(l,{id:"email",name:"email",type:"email",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":n["email"]}]),rules:"email",placeholder:"請輸入 Email",modelValue:a.clientFrom.user.email,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.clientFrom.user.email=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(d,{name:"email",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",Se,[_e,Object(c["createVNode"])(l,{id:"name",name:"姓名",type:"text",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":n["姓名"]}]),rules:"required",placeholder:"請輸入姓名",modelValue:a.clientFrom.user.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.clientFrom.user.name=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(d,{name:"姓名",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",Ie,[Ue,Object(c["createVNode"])(l,{id:"tel",name:"mobile",type:"tel",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":n["mobile"]}]),rules:r.isPhone,placeholder:"請輸入手機號碼",modelValue:a.clientFrom.user.tel,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.clientFrom.user.tel=e})},null,8,["class","rules","modelValue"]),Object(c["createVNode"])(d,{name:"mobile"},{default:Object(c["withCtx"])((function(e){var t=e.message;return[Object(c["createElementVNode"])("span",Te,Object(c["toDisplayString"])(t),1)]})),_:1})]),Object(c["createElementVNode"])("div",Re,[Fe,Object(c["createVNode"])(l,{id:"address",name:"地址",type:"text",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":n["地址"]}]),rules:"required",placeholder:"請輸入地址",modelValue:a.clientFrom.user.address,"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.clientFrom.user.address=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(d,{name:"地址",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",$e,[qe,Object(c["withDirectives"])(Object(c["createElementVNode"])("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=function(e){return a.clientFrom.message=e})},null,512),[[c["vModelText"],a.clientFrom.message]])]),Object(c["createElementVNode"])("div",Ae,[Object(c["createElementVNode"])("button",{ref:"sendOrder",type:"submit",class:"btn btn-danger",disabled:!a.isEnableSend}," 送出訂單 ",8,ze)])]})),_:1},8,["onSubmit"])}var He=n("1da1"),We=(n("96cf"),n("ac1f"),n("00b4"),n("1344")),Ke=new We["a"],Ye=Ke,Ge=n("7bb1"),Qe=n("3aa8"),Xe=n("cbdf"),Ze=n("9457"),et="https://vue3-course-api.hexschool.io/v2",tt="ashen";Object(Ge["e"])("required",Qe["c"]),Object(Ge["e"])("email",Qe["a"]),Object(Ge["e"])("min",Qe["b"]),Object(Ge["d"])({generateMessage:Object(Xe["a"])({zh_TW:Ze})}),Object(Xe["b"])("zh_TW");var nt={data:function(){return{clientFrom:{user:{name:"",email:"",tel:"",address:""},message:""},isEnableSend:!1}},components:{Form:Ge["c"],Field:Ge["b"],ErrorMessage:Ge["a"]},methods:{onSubmit:function(){var e=this;return Object(He["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,A.a.post("".concat(et,"/api/").concat(tt,"/order"),{data:e.clientFrom}).then((function(t){console.log(t),alert(t.data.message),e.$refs.form.resetForm()})).catch((function(e){return console.dir(e)}));case 2:e.emit();case 3:case"end":return t.stop()}}),t)})))()},emit:function(){Ye.emit("clearCart")},isPhone:function(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"}},mounted:function(){var e=this;Ye.on("cartSend",(function(t){console.log("isEnableSend = ".concat(t)),e.isEnableSend=t}))}};const ct=r()(nt,[["render",Je]]);var ot=ct,at={class:"text-end"},rt=["disabled"],lt={class:"table align-middle"},dt=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th"),Object(c["createElementVNode"])("th",null,"品名"),Object(c["createElementVNode"])("th",{style:{width:"150px"}},"數量/單位"),Object(c["createElementVNode"])("th",{class:"col-md-2"},"單價")])],-1),it=["onClick"],st=Object(c["createElementVNode"])("div",{class:"text-success"},"已套用優惠券",-1),ut={class:"input-group input-group-sm"},mt={class:"input-group mb-3"},bt=["onUpdate:modelValue","onChange","disabled"],pt=["value"],Ot={class:"input-group-text",id:"basic-addon2"},jt={class:"text-end"},ht=Object(c["createElementVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),ft={class:"text-end"},gt=Object(c["createElementVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),vt={class:"text-end text-success"};function Et(e,t,n,o,a,r){var l,d=Object(c["resolveComponent"])("Loading");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(d,{active:a.isLoading},null,8,["active"]),Object(c["createElementVNode"])("div",at,[Object(c["createElementVNode"])("button",{onClick:t[0]||(t[0]=function(){return r.clearAllCarts&&r.clearAllCarts.apply(r,arguments)}),class:"btn btn-outline-danger",type:"button",disabled:0===(null===(l=a.cartData.carts)||void 0===l?void 0:l.length)}," 清空購物車 ",8,rt)]),Object(c["createElementVNode"])("table",lt,[dt,Object(c["createElementVNode"])("tbody",null,[a.cartData.carts?(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:0},Object(c["renderList"])(a.cartData.carts,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:e.id},[Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("button",{onClick:function(t){return r.removeCartItem(e.id)},type:"button",class:"btn btn-outline-danger btn-sm"}," x ",8,it)]),Object(c["createElementVNode"])("td",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.product.title)+" ",1),st]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",ut,[Object(c["createElementVNode"])("div",mt,[Object(c["withDirectives"])(Object(c["createElementVNode"])("select",{id:"",class:"form-select","onUpdate:modelValue":function(t){return e.qty=t},onChange:function(t){return r.updateCartItem(e)},disabled:a.isLoadingItem===e.id},[(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(20,(function(t){return Object(c["createElementVNode"])("option",{value:t,key:"".concat(t).concat(e.id)},Object(c["toDisplayString"])(t),9,pt)})),64))],40,bt),[[c["vModelSelect"],e.qty]]),Object(c["createElementVNode"])("span",Ot,Object(c["toDisplayString"])(e.product.unit),1)])])]),Object(c["createElementVNode"])("td",jt," NT$"+Object(c["toDisplayString"])(e.total),1)])})),128)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("tfoot",null,[Object(c["createElementVNode"])("tr",null,[ht,Object(c["createElementVNode"])("td",ft,Object(c["toDisplayString"])(a.cartData.total),1)]),Object(c["createElementVNode"])("tr",null,[gt,Object(c["createElementVNode"])("td",vt,Object(c["toDisplayString"])(a.cartData.final_total),1)])])])],64)}var Vt="https://vue3-course-api.hexschool.io/v2",Nt="ashen",kt={components:{Loading:fe.a},data:function(){return{cartData:[],productId:null,isLoadingItem:"",isLoading:!1,isEnableSend:!1}},methods:{removeCartItem:function(e){var t=this;this.isLoadingItem=e,A.a.delete("".concat(Vt,"/api/").concat(Nt,"/cart/").concat(e)).then((function(e){console.log(e),t.getCart(),t.isLoadingItem=""}))},getCart:function(){var e=this;A.a.get("".concat(Vt,"/api/").concat(Nt,"/cart")).then((function(t){e.cartData=t.data.data,e.isLoading=!1}))},updateCartItem:function(e){var t=this,n={product_id:e.id,qty:e.qty};A.a.put("".concat(Vt,"/api/").concat(Nt,"/cart/").concat(e.id),{data:n}).then((function(e){console.log(e),t.getCart(),t.isLoadingItem=""}))},clearAllCarts:function(){var e=this;A.a.delete("".concat(Vt,"/api/").concat(Nt,"/carts")).then((function(t){console.log(t),e.getCart()}))}},watch:{cartData:function(e){0===e.carts.length?this.isEnableSend=!1:this.isEnableSend=!0;var t=this;Ye.emit("cartSend",t.isEnableSend)}},created:function(){var e=this;Ye.on("clearCart",(function(){e.getCart()}))},mounted:function(){console.log(Ye),this.isLoading=!0,this.getCart()},unmounted:function(){var e=this;Ye.off("clearCart",(function(){e.getCart()}))}};const yt=r()(kt,[["render",Et]]);var wt=yt,xt={components:{ShoppingCart:wt,ValidateForm:ot}};const Ct=r()(xt,[["render",Le]]);var Bt=Ct,Mt={class:"container"},Lt=Object(c["createElementVNode"])("h2",{class:"text-center mb-3"},"訂單後台管理中心",-1),Dt={class:"form-floating mb-3"},Pt=Object(c["createElementVNode"])("label",{for:"floatingInput"},"請輸入管理員信箱",-1),St={class:"form-floating"},_t=Object(c["createElementVNode"])("label",{for:"floatingPassword"},"請輸入密碼",-1),It=Object(c["createElementVNode"])("div",{class:"form-check my-3"},[Object(c["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckChecked"}),Object(c["createElementVNode"])("label",{class:"form-check-label",for:"flexCheckChecked"}," 記住我 ")],-1),Ut=Object(c["createElementVNode"])("p",{class:"mt-5 mb-3 text-muted"},"© 2021~∞ - 六角學院",-1);function Tt(e,t,n,o,a,r){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Mt,[Object(c["createElementVNode"])("form",{class:"formlogin",onSubmit:t[3]||(t[3]=Object(c["withModifiers"])((function(){return r.signIn&&r.signIn.apply(r,arguments)}),["prevent"]))},[Lt,Object(c["createElementVNode"])("div",Dt,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"email",class:"form-control",id:"floatingInput",placeholder:"name@example.com","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.user.username=e}),required:"",autofocus:""},null,512),[[c["vModelText"],a.user.username]]),Pt]),Object(c["createElementVNode"])("div",St,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"password",class:"form-control",id:"floatingPassword","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.user.password=e}),placeholder:"Password"},null,512),[[c["vModelText"],a.user.password]]),_t]),It,Object(c["createElementVNode"])("button",{type:"submit",class:"btn btn-lg btn-primary w-100 mt-3",onClick:t[2]||(t[2]=Object(c["withModifiers"])((function(){return r.signIn&&r.signIn.apply(r,arguments)}),["prevent"]))}," 登入 "),Ut],32)])}n("5319");var Rt="https://vue3-course-api.hexschool.io/v2",Ft="ashen";function $t(e){return qt.apply(this,arguments)}function qt(){return qt=Object(He["a"])(regeneratorRuntime.mark((function e(t){var n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.post("".concat(Rt,"/admin/signin"),t);case 3:return n=e.sent,c=n.data,document.cookie="hexToken=".concat(c.token,"; expires=").concat(new Date(c.expired),";"),console.log("登入成功"),e.abrupt("return",!0);case 10:e.prev=10,e.t0=e["catch"](0),alert(e.t0.response.data.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),qt.apply(this,arguments)}function At(){return zt.apply(this,arguments)}function zt(){return zt=Object(He["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),A.a.defaults.headers.common["Authorization"]=t,e.prev=2,e.next=5,A.a.post("".concat(Rt,"/api/user/check"));case 5:console.log("確認用戶仍然持續登入"),Yr.push("/admin"),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](2),alert(e.t0.response.data.message),Yr.push("/Login");case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),zt.apply(this,arguments)}function Jt(e){return Ht.apply(this,arguments)}function Ht(){return Ht=Object(He["a"])(regeneratorRuntime.mark((function e(t){var n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.get("".concat(Rt,"/api/").concat(Ft,"/admin/products?page=").concat(t));case 3:return n=e.sent,c=n.data,e.abrupt("return",c);case 8:e.prev=8,e.t0=e["catch"](0),alert(e.t0.response.data.message),Yr.push("/Login");case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),Ht.apply(this,arguments)}function Wt(e){return Kt.apply(this,arguments)}function Kt(){return Kt=Object(He["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.post("".concat(Rt,"/api/").concat(Ft,"/admin/product"),t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),alert(e.t0.response.data.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),Kt.apply(this,arguments)}function Yt(e){return Gt.apply(this,arguments)}function Gt(){return Gt=Object(He["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t.data.id),e.next=4,A.a.put("".concat(Rt,"/api/").concat(Ft,"/admin/product/").concat(t.data.id),t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),alert(e.t0.response.data.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),Gt.apply(this,arguments)}function Qt(e){return Xt.apply(this,arguments)}function Xt(){return Xt=Object(He["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,console.log("".concat(Rt,"/api/").concat(Ft,"/admin/product/").concat(t)),e.next=4,A.a.delete("".concat(Rt,"/api/").concat(Ft,"/admin/product/").concat(t));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),alert(e.t0.response.data.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),Xt.apply(this,arguments)}var Zt={data:function(){return{user:{username:"",password:""}}},methods:{signIn:function(){var e=this;return Object(He["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$t(e.user);case 2:n=t.sent,!0===n&&Yr.push("/admin");case 4:case"end":return t.stop()}}),t)})))()}},mounted:function(){return Object(He["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,At();case 2:case"end":return e.stop()}}),e)})))()}};n("d3c6");const en=r()(Zt,[["render",Tt]]);var tn=en;function nn(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("h1",null,"後臺首頁")}const cn={},on=r()(cn,[["render",nn]]);var an=on,rn={class:"d-flex"},ln={class:"main w-100"};function dn(e,t,n,o,a,r){var l=Object(c["resolveComponent"])("Navbar"),d=Object(c["resolveComponent"])("Sidebar"),i=Object(c["resolveComponent"])("router-view");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(l),Object(c["createElementVNode"])("div",rn,[Object(c["createVNode"])(d),Object(c["createElementVNode"])("main",ln,[Object(c["createVNode"])(i)])])],64)}var sn={class:"navbar navbar-expand-lg navbar-light bg-light px-3"},un=Object(c["createTextVNode"])(" 專賣店後台 "),mn={class:"collapse navbar-collapse justify-content-end",id:"navbarNav"},bn={class:"navbar-nav"},pn={class:"nav-item"},On=Object(c["createTextVNode"])(" 回首頁 "),jn={class:"nav-item"};function hn(e,t,n,o,a,r){var l=Object(c["resolveComponent"])("router-link");return Object(c["openBlock"])(),Object(c["createElementBlock"])("nav",sn,[Object(c["createVNode"])(l,{class:"nav-link",to:"/admin"},{default:Object(c["withCtx"])((function(){return[un]})),_:1}),Object(c["createElementVNode"])("div",mn,[Object(c["createElementVNode"])("ul",bn,[Object(c["createElementVNode"])("li",pn,[Object(c["createVNode"])(l,{class:"nav-link",to:"/"},{default:Object(c["withCtx"])((function(){return[On]})),_:1})]),Object(c["createElementVNode"])("li",jn,[Object(c["createElementVNode"])("a",{class:"nav-link logout",onClick:t[0]||(t[0]=function(){return r.logout&&r.logout.apply(r,arguments)})}," 登出 ")])])])])}var fn={methods:{logout:function(){var e=this;return Object(He["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="".concat("https://vue3-course-api.hexschool.io/v2","/logout"),t.next=3,A.a.post(n).then((function(t){alert(t.data.message),document.cookie="hexToken=;expires=;",e.$router.push("/")}));case 3:case"end":return t.stop()}}),t)})))()}}};n("723b");const gn=r()(fn,[["render",hn],["__scopeId","data-v-8347e7ea"]]);var vn=gn,En={class:"sidebar"},Vn={class:"list-group list-group-flush bg-transparent"},Nn={class:"list-group-item"},kn=Object(c["createTextVNode"])("首頁"),yn={class:"list-group-item"},wn=Object(c["createTextVNode"])("產品"),xn={class:"list-group-item"},Cn=Object(c["createTextVNode"])("優惠卷"),Bn={class:"list-group-item"},Mn=Object(c["createTextVNode"])("訂單");function Ln(e,t){var n=Object(c["resolveComponent"])("router-link");return Object(c["openBlock"])(),Object(c["createElementBlock"])("aside",En,[Object(c["createElementVNode"])("ul",Vn,[Object(c["createElementVNode"])("li",Nn,[Object(c["createVNode"])(n,{class:"nav-link",to:"/admin"},{default:Object(c["withCtx"])((function(){return[kn]})),_:1})]),Object(c["createElementVNode"])("li",yn,[Object(c["createVNode"])(n,{class:"nav-link",to:"/admin/Products"},{default:Object(c["withCtx"])((function(){return[wn]})),_:1})]),Object(c["createElementVNode"])("li",xn,[Object(c["createVNode"])(n,{class:"nav-link",to:"/admin/Coupons"},{default:Object(c["withCtx"])((function(){return[Cn]})),_:1})]),Object(c["createElementVNode"])("li",Bn,[Object(c["createVNode"])(n,{class:"nav-link",to:"/admin/Orders"},{default:Object(c["withCtx"])((function(){return[Mn]})),_:1})])])])}n("c901");const Dn={},Pn=r()(Dn,[["render",Ln],["__scopeId","data-v-323686e8"]]);var Sn=Pn,_n={components:{Navbar:vn,Sidebar:Sn},created:function(){return Object(He["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,At();case 2:case"end":return e.stop()}}),e)})))()}};n("5572");const In=r()(_n,[["render",dn]]);var Un=In,Tn={class:"container"},Rn={class:"text-end mt-4"},Fn={class:"table mt-4"},$n=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",{width:"120"},"分類"),Object(c["createElementVNode"])("th",null,"產品名稱"),Object(c["createElementVNode"])("th",{width:"120"},"原價"),Object(c["createElementVNode"])("th",{width:"120"},"售價"),Object(c["createElementVNode"])("th",{width:"100"},"是否啟用"),Object(c["createElementVNode"])("th",{width:"120"},"編輯")])],-1),qn={class:"text-end"},An={class:"text-end"},zn={key:0,class:"text-success"},Jn={key:1},Hn={class:"btn-group"},Wn=["onClick"],Kn=["onClick"];function Yn(e,t,n,o,a,r){var l=Object(c["resolveComponent"])("Loading"),d=Object(c["resolveComponent"])("pagination"),i=Object(c["resolveComponent"])("productModal"),s=Object(c["resolveComponent"])("delProductModal");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(l,{active:a.isLoading},null,8,["active"]),Object(c["createElementVNode"])("div",Tn,[Object(c["createElementVNode"])("div",Rn,[Object(c["createElementVNode"])("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=function(e){return r.showModal("new")})},"建立新的產品")]),Object(c["createElementVNode"])("table",Fn,[$n,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.products,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:e.id},[Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.category),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.title),1),Object(c["createElementVNode"])("td",qn,Object(c["toDisplayString"])(e.origin_price),1),Object(c["createElementVNode"])("td",An,Object(c["toDisplayString"])(e.price),1),Object(c["createElementVNode"])("td",null,[e.is_enabled?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",zn,"啟用")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Jn,"未啟用"))]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",Hn,[Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(t){return r.showModal("update",e)}}," 編輯 ",8,Wn),Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return r.showModal("delete",e)}}," 刪除 ",8,Kn)])])])})),128))])]),Object(c["createVNode"])(d,{pages:a.pagination,onEmitpages:r.init},null,8,["pages","onEmitpages"])]),Object(c["createVNode"])(i,{productinfo:a.tempProduct,state:a.isNew,onUpdate:r.init},null,8,["productinfo","state","onUpdate"]),Object(c["createVNode"])(s,{productinfo:a.tempProduct,onUpdate:r.init},null,8,["productinfo","onUpdate"])],64)}var Gn=n("5530"),Qn=(n("e9c4"),function(e){return Object(c["pushScopeId"])("data-v-675d463d"),e=e(),Object(c["popScopeId"])(),e}),Xn={key:0},Zn={class:"pagination justify-content-center"},ec=Qn((function(){return Object(c["createElementVNode"])("span",{"aria-hidden":"true"},"«",-1)})),tc=[ec],nc={key:0,class:"page-link"},cc=["onClick"],oc=Qn((function(){return Object(c["createElementVNode"])("span",{"aria-hidden":"true"},"»",-1)})),ac=[oc];function rc(e,t,n,o,a,r){return n.pages?(Object(c["openBlock"])(),Object(c["createElementBlock"])("nav",Xn,[Object(c["createElementVNode"])("ul",Zn,[Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["page-item",{disabled:1===n.pages.current_page}])},[Object(c["createElementVNode"])("a",{class:"page-link",onClick:t[0]||(t[0]=Object(c["withModifiers"])((function(e){return r.emitpages(n.pages.current_page-1)}),["prevent"]))},tc)],2),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(n.pages.total_pages,(function(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{class:Object(c["normalizeClass"])(["page-item",{active:e===n.pages.current_page}]),"aria-current":"page",key:t},[e===n.pages.current_page?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",nc,Object(c["toDisplayString"])(e),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("a",{key:1,class:"page-link",onClick:Object(c["withModifiers"])((function(t){return r.emitpages(e)}),["prevent"])},Object(c["toDisplayString"])(e),9,cc))],2)})),128)),Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["page-item",{disabled:n.pages.current_page===n.pages.total_pages}])},[Object(c["createElementVNode"])("a",{class:"page-link",onClick:t[1]||(t[1]=Object(c["withModifiers"])((function(e){return r.emitpages(n.pages.current_page+1)}),["prevent"]))},ac)],2)])])):Object(c["createCommentVNode"])("",!0)}var lc={props:["pages"],methods:{emitpages:function(e){this.$emit("emitpages",e)}}};n("958f");const dc=r()(lc,[["render",rc],["__scopeId","data-v-675d463d"]]);var ic=dc,sc={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},uc={class:"modal-dialog modal-xl"},mc={class:"modal-content border-0"},bc={class:"modal-header bg-primary text-white"},pc={id:"productModalLabel",class:"modal-title"},Oc={key:0},jc={key:1},hc=Object(c["createElementVNode"])("button",{type:"button",class:"btn-close bg-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),fc={class:"modal-body"},gc={class:"row"},vc={class:"col-sm-4"},Ec={class:"mb-2"},Vc={class:"mb-3"},Nc=Object(c["createElementVNode"])("label",{for:"imageUrl",class:"form-label"},"主要圖片網址",-1),kc=["src"],yc={class:"mb-2"},wc={class:"mb-3"},xc=Object(c["createElementVNode"])("label",{for:"customImage",class:"form-label"},"從本地端上傳圖片",-1),Cc=["src"],Bc=Object(c["createElementVNode"])("h3",null,"多圖新增",-1),Mc={key:0},Lc=Object(c["createElementVNode"])("label",{for:"imageUrl",class:"form-label"},"圖片網址",-1),Dc=["onUpdate:modelValue"],Pc=["src"],Sc={key:0},_c={key:1},Ic={key:1},Uc={class:"col-sm-8"},Tc={class:"mb-3"},Rc=Object(c["createElementVNode"])("label",{for:"title",class:"form-label"},"標題",-1),Fc={class:"row"},$c={class:"mb-3 col-md-6"},qc=Object(c["createElementVNode"])("label",{for:"category",class:"form-label"},"分類",-1),Ac={class:"mb-3 col-md-6"},zc=Object(c["createElementVNode"])("label",{for:"price",class:"form-label"},"單位",-1),Jc={class:"row"},Hc={class:"mb-3 col-md-6"},Wc=Object(c["createElementVNode"])("label",{for:"origin_price",class:"form-label"},"原價",-1),Kc={class:"mb-3 col-md-6"},Yc=Object(c["createElementVNode"])("label",{for:"price",class:"form-label"},"售價",-1),Gc=Object(c["createElementVNode"])("hr",null,null,-1),Qc={class:"mb-3"},Xc=Object(c["createElementVNode"])("label",{for:"description",class:"form-label"},"產品描述",-1),Zc={class:"mb-3"},eo=Object(c["createElementVNode"])("label",{for:"content",class:"form-label"},"說明內容",-1),to={class:"mb-3"},no={class:"form-check"},co=Object(c["createElementVNode"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),oo={class:"modal-footer"},ao=Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function ro(e,t,n,o,a,r){var l=Object(c["resolveComponent"])("Loading");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(l,{active:a.isLoading},null,8,["active"]),Object(c["createElementVNode"])("div",sc,[Object(c["createElementVNode"])("div",uc,[Object(c["createElementVNode"])("div",mc,[Object(c["createElementVNode"])("div",bc,[Object(c["createElementVNode"])("h5",pc,[a.isNew?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Oc,"新增產品")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",jc,"編輯產品"))]),hc]),Object(c["createElementVNode"])("div",fc,[Object(c["createElementVNode"])("div",gc,[Object(c["createElementVNode"])("div",vc,[Object(c["createElementVNode"])("div",Ec,[Object(c["createElementVNode"])("div",Vc,[Nc,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"請輸入主要圖片連結","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.tempProduct.imageUrl=e})},null,512),[[c["vModelText"],a.tempProduct.imageUrl]])]),Object(c["createElementVNode"])("img",{class:"img-fluid",src:a.tempProduct.imageUrl,alt:""},null,8,kc)]),Object(c["createElementVNode"])("div",yc,[Object(c["createElementVNode"])("div",wc,[xc,Object(c["createElementVNode"])("input",{ref:"fileInput",type:"file",class:"form-control",id:"customImage",onChange:t[1]||(t[1]=function(){return r.customImageFile&&r.customImageFile.apply(r,arguments)})},null,544)]),Object(c["createElementVNode"])("img",{class:"img-fluid",src:a.tempProduct.fileImage,alt:""},null,8,Cc)]),Bc,Array.isArray(a.tempProduct.imagesUrl)?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Mc,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.tempProduct.imagesUrl,(function(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:t},[Lc,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"請輸入次要圖片連結","onUpdate:modelValue":function(e){return a.tempProduct.imagesUrl[t]=e}},null,8,Dc),[[c["vModelText"],a.tempProduct.imagesUrl[t]]]),Object(c["createElementVNode"])("img",{class:"img-fluid",src:e,alt:""},null,8,Pc)])})),128)),!a.tempProduct.imagesUrl.length||a.tempProduct.imagesUrl[a.tempProduct.imagesUrl.length-1]?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Sc,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[2]||(t[2]=function(e){return a.tempProduct.imagesUrl.push("")})}," 新增圖片 ")])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",_c,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:t[3]||(t[3]=function(e){return a.tempProduct.imagesUrl.pop()})}," 刪除圖片 ")]))])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Ic,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[4]||(t[4]=function(){return e.createImages&&e.createImages.apply(e,arguments)})}," 新增圖片 ")]))]),Object(c["createElementVNode"])("div",Uc,[Object(c["createElementVNode"])("div",Tc,[Rc,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":t[5]||(t[5]=function(e){return a.tempProduct.title=e})},null,512),[[c["vModelText"],a.tempProduct.title]])]),Object(c["createElementVNode"])("div",Fc,[Object(c["createElementVNode"])("div",$c,[qc,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":t[6]||(t[6]=function(e){return a.tempProduct.category=e})},null,512),[[c["vModelText"],a.tempProduct.category]])]),Object(c["createElementVNode"])("div",Ac,[zc,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":t[7]||(t[7]=function(e){return a.tempProduct.unit=e})},null,512),[[c["vModelText"],a.tempProduct.unit]])])]),Object(c["createElementVNode"])("div",Jc,[Object(c["createElementVNode"])("div",Hc,[Wc,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":t[8]||(t[8]=function(e){return a.tempProduct.origin_price=e})},null,512),[[c["vModelText"],a.tempProduct.origin_price]])]),Object(c["createElementVNode"])("div",Kc,[Yc,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":t[9]||(t[9]=function(e){return a.tempProduct.price=e})},null,512),[[c["vModelText"],a.tempProduct.price]])])]),Gc,Object(c["createElementVNode"])("div",Qc,[Xc,Object(c["withDirectives"])(Object(c["createElementVNode"])("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":t[10]||(t[10]=function(e){return a.tempProduct.description=e})},"\n                ",512),[[c["vModelText"],a.tempProduct.description]])]),Object(c["createElementVNode"])("div",Zc,[eo,Object(c["withDirectives"])(Object(c["createElementVNode"])("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":t[11]||(t[11]=function(e){return a.tempProduct.content=e})},"\n                ",512),[[c["vModelText"],a.tempProduct.content]])]),Object(c["createElementVNode"])("div",to,[Object(c["createElementVNode"])("div",no,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":t[12]||(t[12]=function(e){return a.tempProduct.is_enabled=e})},null,512),[[c["vModelCheckbox"],a.tempProduct.is_enabled]]),co])])])])]),Object(c["createElementVNode"])("div",oo,[ao,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[13]||(t[13]=function(){return r.updateItem&&r.updateItem.apply(r,arguments)})},"確認")])])])],512)],64)}var lo={props:["productinfo","state"],emits:["update"],components:{Loading:fe.a},data:function(){return{tempProduct:this.productinfo,isNew:this.state,productModal:null,isLoading:!1}},methods:{updateItem:function(){var e=this;return Object(He["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isLoading=!0,!0!==e.isNew){t.next=6;break}return t.next=4,Wt({data:e.tempProduct});case 4:t.next=8;break;case 6:return t.next=8,Yt({data:e.tempProduct});case 8:e.$emit("update"),e.isLoading=!1;case 10:case"end":return t.stop()}}),t)})))()},customImageFile:function(){var e=this;return Object(He["a"])(regeneratorRuntime.mark((function t(){var n,c,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,n="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ashen","/admin/upload"),c=e.$refs.fileInput.files[0],o=new FormData,o.append("file-to-upload",c),t.next=7,A.a.post(n,o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){console.log(t),e.tempProduct.fileImage=t.data.imageUrl,e.$refs.fileInput.value=""}));case 7:e.isLoading=!1;case 8:case"end":return t.stop()}}),t)})))()}},watch:{state:function(e){this.isNew=e},productinfo:function(e){this.tempProduct=e}}};const io=r()(lo,[["render",ro]]);var so=io,uo={id:"delProductModal",ref:"delProductModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},mo={class:"modal-dialog"},bo={class:"modal-content border-0"},po=Object(c["createElementVNode"])("div",{class:"modal-header bg-danger text-white"},[Object(c["createElementVNode"])("h5",{id:"delProductModalLabel",class:"modal-title"},[Object(c["createElementVNode"])("span",null,"刪除產品")]),Object(c["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Oo={class:"modal-body"},jo=Object(c["createTextVNode"])(" 是否刪除 "),ho={class:"text-danger"},fo=Object(c["createTextVNode"])(" 商品(刪除後將無法恢復)。 "),go={class:"modal-footer"},vo=Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Eo(e,t,n,o,a,r){var l=Object(c["resolveComponent"])("Loading");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(l,{active:a.isLoading},null,8,["active"]),Object(c["createElementVNode"])("div",uo,[Object(c["createElementVNode"])("div",mo,[Object(c["createElementVNode"])("div",bo,[po,Object(c["createElementVNode"])("div",Oo,[jo,Object(c["createElementVNode"])("strong",ho,Object(c["toDisplayString"])(a.tempProduct.title),1),fo]),Object(c["createElementVNode"])("div",go,[vo,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=function(){return r.deleteItem&&r.deleteItem.apply(r,arguments)})},"確認刪除")])])])],512)],64)}var Vo={components:{Loading:fe.a},props:["productinfo"],emits:["update"],data:function(){return{tempProduct:this.productinfo,delProductModal:null,isLoading:!1}},methods:{deleteItem:function(){var e=this;return Object(He["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,Qt(e.tempProduct.id);case 3:e.$emit("update"),e.isLoading=!1;case 5:case"end":return t.stop()}}),t)})))()}},watch:{productinfo:function(e){this.tempProduct=e}}};const No=r()(Vo,[["render",Eo]]);var ko=No,yo={title:"",category:"",origin_price:0,price:0,unit:"",description:"",content:"",is_enabled:1,imageUrl:"",imagesUrl:[],fileImage:""},wo={components:{pagination:ic,productModal:so,delProductModal:ko,Loading:fe.a},data:function(){return{products:[],pagination:null,isNew:!1,tempProduct:yo,productModal:null,delProductModal:null,isLoading:!1}},methods:{init:function(){var e=arguments,t=this;return Object(He["a"])(regeneratorRuntime.mark((function n(){var c,o,a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c=e.length>0&&void 0!==e[0]?e[0]:1,console.log("從遠端抓新資料"),t.isLoading=!0,n.next=5,Jt(c);case 5:o=n.sent,a=o.products,r=o.pagination,t.products=a,t.pagination=r,t.productModal.hide(),t.delProductModal.hide(),t.isLoading=!1;case 13:case"end":return n.stop()}}),n)})))()},showModal:function(e,t){"new"===e?(this.tempProduct=JSON.parse(JSON.stringify(yo)),this.isNew=!0,this.productModal.show()):"update"===e?(console.log("update"),this.tempProduct=JSON.parse(JSON.stringify(t)),this.isNew=!1,this.productModal.show()):"delete"===e&&(console.log("delete"),this.tempProduct=Object(Gn["a"])({},t),this.delProductModal.show())},createImages:function(){this.tempProduct.imagesUrl=[],this.tempProduct.imagesUrl.push("")}},created:function(){this.init()},mounted:function(){this.productModal=new je.a(document.getElementById("productModal"),{keyboard:!1}),this.delProductModal=new je.a(document.getElementById("delProductModal"),{keyboard:!1})}};const xo=r()(wo,[["render",Yn]]);var Co=xo,Bo={class:"container"},Mo={class:"text-end mt-4"},Lo={class:"table mt-4"},Do=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,"名稱"),Object(c["createElementVNode"])("th",null,"折扣百分比"),Object(c["createElementVNode"])("th",null,"到期日"),Object(c["createElementVNode"])("th",null,"是否啟用"),Object(c["createElementVNode"])("th",null,"編輯")])],-1),Po={key:0,class:"text-success"},So={key:1,class:"text-muted"},_o={class:"btn-group"},Io=["onClick"],Uo=["onClick"];function To(e,t,n,o,a,r){var l=Object(c["resolveComponent"])("Loading"),d=Object(c["resolveComponent"])("pagination"),i=Object(c["resolveComponent"])("couponsModal"),s=Object(c["resolveComponent"])("delCoupons");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(l,{active:a.isLoading},null,8,["active"]),Object(c["createElementVNode"])("div",Bo,[Object(c["createElementVNode"])("div",Mo,[Object(c["createElementVNode"])("button",{class:"btn btn-primary",type:"button",onClick:t[0]||(t[0]=function(e){return r.openCouponModal(!0)})}," 建立新的優惠券 ")]),Object(c["createElementVNode"])("table",Lo,[Do,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.coupons,(function(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:t},[Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.title),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.percent)+"%",1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(new Date(1e3*e.due_date).toLocaleDateString()),1),Object(c["createElementVNode"])("td",null,[1===e.is_enabled?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Po,"啟用")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",So,"未啟用"))]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",_o,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(t){return r.openCouponModal(!1,e)}}," 編輯 ",8,Io),Object(c["createElementVNode"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(t){return r.openDelCouponModal(e)}}," 刪除 ",8,Uo)])])])})),128))])]),Object(c["createVNode"])(d,{pages:a.pagination,onEmitpages:r.getCoupons},null,8,["pages","onEmitpages"])]),Object(c["createVNode"])(i,{ref:"couponModal","is-new":a.isNew,coupon:a.tempCoupon,onResetCoupons:r.getCoupons},null,8,["is-new","coupon","onResetCoupons"]),Object(c["createVNode"])(s,{ref:"delCoupon",coupon:a.tempCoupon,onResetCoupons:r.getCoupons},null,8,["coupon","onResetCoupons"])],64)}var Ro={class:"modal fade",id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},Fo={class:"modal-dialog",role:"document"},$o={class:"modal-content"},qo={class:"modal-header"},Ao={class:"modal-title",id:"exampleModalLabel"},zo={key:0},Jo={key:1},Ho=Object(c["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Wo={class:"modal-body"},Ko={class:"mb-3"},Yo=Object(c["createElementVNode"])("label",{for:"title"},"標題",-1),Go={class:"mb-3"},Qo=Object(c["createElementVNode"])("label",{for:"coupon_code"},"優惠碼",-1),Xo={class:"mb-3"},Zo=Object(c["createElementVNode"])("label",{for:"due_date"},"到期日",-1),ea={class:"mb-3"},ta=Object(c["createElementVNode"])("label",{for:"price"},"折扣百分比",-1),na={class:"mb-3"},ca={class:"form-check"},oa=Object(c["createElementVNode"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),aa={class:"modal-footer"},ra=Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);function la(e,t,n,o,a,r){var l=Object(c["resolveComponent"])("Loading");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(l,{active:a.isLoading},null,8,["active"]),Object(c["createElementVNode"])("div",Ro,[Object(c["createElementVNode"])("div",Fo,[Object(c["createElementVNode"])("div",$o,[Object(c["createElementVNode"])("div",qo,[Object(c["createElementVNode"])("h5",Ao,[n.isNew?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",zo,"新增優惠卷")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Jo,"編輯優惠卷"))]),Ho]),Object(c["createElementVNode"])("div",Wo,[Object(c["createElementVNode"])("div",Ko,[Yo,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.tempCoupon.title=e}),placeholder:"請輸入標題"},null,512),[[c["vModelText"],a.tempCoupon.title]])]),Object(c["createElementVNode"])("div",Go,[Qo,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",id:"coupon_code","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.tempCoupon.code=e}),placeholder:"請輸入優惠碼"},null,512),[[c["vModelText"],a.tempCoupon.code]])]),Object(c["createElementVNode"])("div",Xo,[Zo,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"date",class:"form-control",id:"due_date","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.due_date=e})},null,512),[[c["vModelText"],a.due_date]])]),Object(c["createElementVNode"])("div",ea,[ta,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"number",class:"form-control",id:"price",min:"0","onUpdate:modelValue":t[3]||(t[3]=function(e){return a.tempCoupon.percent=e}),placeholder:"請輸入折扣百分比"},null,512),[[c["vModelText"],a.tempCoupon.percent,void 0,{number:!0}]])]),Object(c["createElementVNode"])("div",na,[Object(c["createElementVNode"])("div",ca,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":t[4]||(t[4]=function(e){return a.tempCoupon.is_enabled=e}),id:"is_enabled"},null,512),[[c["vModelCheckbox"],a.tempCoupon.is_enabled]]),oa])])]),Object(c["createElementVNode"])("div",aa,[ra,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=function(){return r.updateCoupon&&r.updateCoupon.apply(r,arguments)})},Object(c["toDisplayString"])(n.isNew?"新增優惠卷":"更新優惠券"),1)])])])],512)],64)}n("1276");var da={methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new je.a(this.$refs.modal)}},ia={components:{Loading:fe.a},props:{coupon:{type:Object,default:function(){return{}}},isNew:{type:Boolean,default:!1}},emits:["resetCoupons"],data:function(){return{tempCoupon:{},due_date:"",isLoading:!1}},mounted:function(){this.tempCoupon=Object(Gn["a"])({},this.coupon)},methods:{updateCoupon:function(){var e=this;return Object(He["a"])(regeneratorRuntime.mark((function t(){var n,c,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,n="post",c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ashen","/admin/coupon"),o=e.tempCoupon,!1===e.isNew&&(n="put",c+="/".concat(e.coupon.id)),t.next=7,A.a[n](c,{data:o}).then((function(e){console.log(e.data.message)})).catch((function(e){console.error(e.response.data.message)}));case 7:e.$emit("resetCoupons"),e.isLoading=!1;case 9:case"end":return t.stop()}}),t)})))()}},watch:{coupon:function(){this.tempCoupon=Object(Gn["a"])({},this.coupon);var e=new Date(1e3*this.tempCoupon.due_date).toISOString().split("T");this.due_date=e[0]},due_date:function(){var e=Math.floor(new Date(this.due_date)/1e3);this.tempCoupon.due_date=e}},mixins:[da]};const sa=r()(ia,[["render",la]]);var ua=sa,ma={id:"delCouponModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true",ref:"modal"},ba={class:"modal-dialog"},pa={class:"modal-content border-0"},Oa=Object(c["createElementVNode"])("div",{class:"modal-header bg-danger text-white"},[Object(c["createElementVNode"])("h5",{id:"delProductModalLabel",class:"modal-title"},[Object(c["createElementVNode"])("span",null,"刪除優惠卷")]),Object(c["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ja={class:"modal-body"},ha=Object(c["createTextVNode"])(" 是否刪除 "),fa={class:"text-danger"},ga=Object(c["createTextVNode"])(" (刪除後將無法恢復)。 "),va={class:"modal-footer"},Ea=Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Va(e,t,n,o,a,r){var l,d=Object(c["resolveComponent"])("Loading");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(d,{active:a.isLoading},null,8,["active"]),Object(c["createElementVNode"])("div",ma,[Object(c["createElementVNode"])("div",ba,[Object(c["createElementVNode"])("div",pa,[Oa,Object(c["createElementVNode"])("div",ja,[ha,Object(c["createElementVNode"])("strong",fa,Object(c["toDisplayString"])(null===(l=a.tempProduct)||void 0===l?void 0:l.title),1),ga]),Object(c["createElementVNode"])("div",va,[Ea,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=function(){return r.deleteItem&&r.deleteItem.apply(r,arguments)})},"確認刪除")])])])],512)],64)}var Na={components:{Loading:fe.a},props:["coupon"],emits:["resetCoupons"],data:function(){return{modal:null,tempProduct:this.coupon,isLoading:!1}},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()},deleteItem:function(){var e=this;return Object(He["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,n="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ashen","/admin/coupon/").concat(e.tempProduct.id),t.next=4,A.a.delete(n).then((function(t){console.log(t.data.message),e.$emit("resetCoupons")})).catch((function(e){console.error(e.response.data.message)}));case 4:e.isLoading=!1;case 5:case"end":return t.stop()}}),t)})))()}},watch:{coupon:function(e){this.tempProduct=e}},mounted:function(){this.modal=new je.a(this.$refs.modal)}};const ka=r()(Na,[["render",Va]]);var ya=ka,wa={components:{pagination:ic,couponsModal:ua,delCoupons:ya,Loading:fe.a},data:function(){return{coupons:[],pagination:null,isNew:!1,tempCoupon:{title:"",is_enabled:0,percent:100,code:""},isLoading:!1}},methods:{getCoupons:function(){var e=arguments,t=this;return Object(He["a"])(regeneratorRuntime.mark((function n(){var c,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c=e.length>0&&void 0!==e[0]?e[0]:1,t.isLoading=!0,o="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ashen","/admin/coupons?page=").concat(c),n.next=5,A.a.get(o).then((function(e){t.coupons=e.data.coupons,t.pagination=e.data.pagination})).catch((function(e){console.dir(e.response)}));case 5:t.$refs.couponModal.hideModal(),t.$refs.delCoupon.hideModal(),t.isLoading=!1;case 8:case"end":return n.stop()}}),n)})))()},openCouponModal:function(e,t){this.isNew=e,!0===this.isNew?this.tempCoupon={due_date:(new Date).getTime()/1e3}:this.tempCoupon=Object(Gn["a"])({},t),this.$refs.couponModal.openModal()},openDelCouponModal:function(e){this.tempCoupon=Object(Gn["a"])({},e);var t=this.$refs.delCoupon;t.openModal()}},mounted:function(){var e=this;return Object(He["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getCoupons();case 2:case"end":return t.stop()}}),t)})))()}};const xa=r()(wa,[["render",To]]);var Ca=xa,Ba={class:"table mt-4"},Ma=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,"購買時間"),Object(c["createElementVNode"])("th",null,"Email"),Object(c["createElementVNode"])("th",null,"購買款項"),Object(c["createElementVNode"])("th",null,"應付金額"),Object(c["createElementVNode"])("th",null,"是否付款"),Object(c["createElementVNode"])("th",null,"編輯")])],-1),La=["textContent"],Da={class:"list-unstyled"},Pa={class:"text-right"},Sa={class:"form-check form-switch"},_a=["id","onUpdate:modelValue","onChange"],Ia=["for"],Ua={key:0},Ta={key:1},Ra={class:"btn-group"},Fa=["onClick"],$a=["onClick"];function qa(e,t,n,o,a,r){var l=Object(c["resolveComponent"])("Loading"),d=Object(c["resolveComponent"])("pagination"),i=Object(c["resolveComponent"])("OrderModal"),s=Object(c["resolveComponent"])("DelOrderModal");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(l,{active:a.isLoading},null,8,["active"]),Object(c["createElementVNode"])("table",Ba,[Ma,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.orders,(function(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:t},[a.orders.length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:0,class:Object(c["normalizeClass"])({"text-secondary":!e.is_paid})},[Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(new Date(1e3*e.create_at).toLocaleDateString()),1),Object(c["createElementVNode"])("td",null,[e.user?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:0,textContent:Object(c["toDisplayString"])(e.user.email)},null,8,La)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("ul",Da,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.products,(function(e,t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t},Object(c["toDisplayString"])(e.product.title)+" 數量："+Object(c["toDisplayString"])(e.qty)+" "+Object(c["toDisplayString"])(e.product.unit),1)})),128))])]),Object(c["createElementVNode"])("td",Pa,Object(c["toDisplayString"])(e.total),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",Sa,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch".concat(e.id),"onUpdate:modelValue":function(t){return e.is_paid=t},onChange:function(t){return r.updateOrder(e)}},null,40,_a),[[c["vModelCheckbox"],e.is_paid]]),Object(c["createElementVNode"])("label",{class:"form-check-label",for:"paidSwitch".concat(e.id)},[e.is_paid?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Ua,"已付款")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Ta,"未付款"))],8,Ia)])]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",Ra,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-primary btn-sm",type:"button",onClick:function(t){return r.openOrder(e)}}," 檢視 ",8,Fa),Object(c["createElementVNode"])("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:function(t){return r.openDelOrder(e)}}," 刪除 ",8,$a)])])],2)):Object(c["createCommentVNode"])("",!0)],64)})),128))])]),Object(c["createVNode"])(d,{pages:a.pagination,onEmitpages:r.getOrders},null,8,["pages","onEmitpages"]),Object(c["createVNode"])(i,{ref:"orderModal","order-data":a.tempOrder,onUpdateOrders:r.updateOrder},null,8,["order-data","onUpdateOrders"]),Object(c["createVNode"])(s,{ref:"delModel",coupon:a.tempOrder,onDelOrder:r.delOrder},null,8,["coupon","onDelOrder"])],64)}var Aa={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},za={class:"modal-dialog modal-xl",role:"document"},Ja={class:"modal-content border-0"},Ha=Object(c["createElementVNode"])("div",{class:"modal-header bg-dark text-white"},[Object(c["createElementVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(c["createElementVNode"])("span",null,"訂單細節")]),Object(c["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Wa={class:"modal-body"},Ka={class:"row"},Ya={class:"col-md-4"},Ga=Object(c["createElementVNode"])("h3",null,"用戶資料",-1),Qa={class:"table"},Xa={key:0},Za=Object(c["createElementVNode"])("th",{style:{width:"100px"}},"姓名",-1),er=Object(c["createElementVNode"])("th",null,"Email",-1),tr=Object(c["createElementVNode"])("th",null,"電話",-1),nr=Object(c["createElementVNode"])("th",null,"地址",-1),cr={class:"col-md-8"},or=Object(c["createElementVNode"])("h3",null,"訂單細節",-1),ar={class:"table"},rr=Object(c["createElementVNode"])("th",{style:{width:"100px"}},"訂單編號",-1),lr=Object(c["createElementVNode"])("th",null,"下單時間",-1),dr=Object(c["createElementVNode"])("th",null,"付款時間",-1),ir={key:0},sr={key:1},ur=Object(c["createElementVNode"])("th",null,"付款狀態",-1),mr={key:0,class:"text-success"},br={key:1,class:"text-muted"},pr=Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,"總金額"),Object(c["createElementVNode"])("td")],-1),Or=Object(c["createElementVNode"])("h3",null,"選購商品",-1),jr={class:"table"},hr=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr")],-1),fr=Object(c["createElementVNode"])("td",{class:"text-end"},null,-1),gr={class:"d-flex justify-content-end"},vr={class:"form-check"},Er={class:"form-check-label",for:"flexCheckDefault"},Vr={key:0},Nr={key:1},kr={class:"modal-footer"},yr=Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function wr(e,t,n,o,a,r){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Aa,[Object(c["createElementVNode"])("div",za,[Object(c["createElementVNode"])("div",Ja,[Ha,Object(c["createElementVNode"])("div",Wa,[Object(c["createElementVNode"])("div",Ka,[Object(c["createElementVNode"])("div",Ya,[Ga,Object(c["createElementVNode"])("table",Qa,[a.tempOrder.user?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tbody",Xa,[Object(c["createElementVNode"])("tr",null,[Za,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.tempOrder.user.name),1)]),Object(c["createElementVNode"])("tr",null,[er,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.tempOrder.user.email),1)]),Object(c["createElementVNode"])("tr",null,[tr,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.tempOrder.user.tel),1)]),Object(c["createElementVNode"])("tr",null,[nr,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.tempOrder.user.address),1)])])):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("div",cr,[or,Object(c["createElementVNode"])("table",ar,[Object(c["createElementVNode"])("tbody",null,[Object(c["createElementVNode"])("tr",null,[rr,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(a.tempOrder.id),1)]),Object(c["createElementVNode"])("tr",null,[lr,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(new Date(1e3*a.tempOrder.create_at).toLocaleDateString()),1)]),Object(c["createElementVNode"])("tr",null,[dr,Object(c["createElementVNode"])("td",null,[a.tempOrder.paid_date?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",ir,Object(c["toDisplayString"])(new Date(1e3*a.tempOrder.paid_date).toLocaleDateString()),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",sr,"時間不正確"))])]),Object(c["createElementVNode"])("tr",null,[ur,Object(c["createElementVNode"])("td",null,[a.tempOrder.is_paid?(Object(c["openBlock"])(),Object(c["createElementBlock"])("strong",mr,"已付款")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",br,"尚未付款"))])]),pr])]),Or,Object(c["createElementVNode"])("table",jr,[hr,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.tempOrder.products,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:e.id},[Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.product.title),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.qty)+" / "+Object(c["toDisplayString"])(e.product.unit),1),fr])})),128))])]),Object(c["createElementVNode"])("div",gr,[Object(c["createElementVNode"])("div",vr,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.tempOrder.is_paid=e})},null,512),[[c["vModelCheckbox"],a.tempOrder.is_paid]]),Object(c["createElementVNode"])("label",Er,[a.tempOrder.is_paid?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Vr,"已付款")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Nr,"未付款"))])])])])])]),Object(c["createElementVNode"])("div",kr,[yr,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=function(t){return e.$emit("update-orders",a.tempOrder)})}," 修改付款狀態 ")])])])],512)}var xr={data:function(){return{tempOrder:{}}},props:["orderData"],methods:{},mounted:function(){this.tempOrder=this.orderData},watch:{orderData:function(){this.tempOrder=this.orderData}},mixins:[da]};const Cr=r()(xr,[["render",wr]]);var Br=Cr,Mr={id:"delProductModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},Lr={class:"modal-dialog"},Dr={class:"modal-content border-0"},Pr=Object(c["createElementVNode"])("div",{class:"modal-header bg-danger text-white"},[Object(c["createElementVNode"])("h5",{id:"delProductModalLabel",class:"modal-title"},[Object(c["createElementVNode"])("span",null,"刪除訂單")]),Object(c["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Sr={class:"modal-body"},_r=Object(c["createTextVNode"])(" 是否刪除 "),Ir={class:"text-danger"},Ur=Object(c["createTextVNode"])(" (刪除後將無法恢復)。 "),Tr={class:"modal-footer"},Rr=Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Fr(e,t,n,o,a,r){var l;return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Mr,[Object(c["createElementVNode"])("div",Lr,[Object(c["createElementVNode"])("div",Dr,[Pr,Object(c["createElementVNode"])("div",Sr,[_r,Object(c["createElementVNode"])("strong",Ir,Object(c["toDisplayString"])(null===(l=a.tempOrder)||void 0===l?void 0:l.title),1),Ur]),Object(c["createElementVNode"])("div",Tr,[Rr,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=function(){return r.deleteOrder&&r.deleteOrder.apply(r,arguments)})},"確認刪除")])])])],512)}var $r={props:["coupon"],data:function(){return{modal:null,tempOrder:this.coupon}},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()},deleteOrder:function(){console.log("delete"),this.$emit("delOrder",this.tempOrder)}},watch:{coupon:function(e){this.tempOrder=e}},mounted:function(){this.modal=new je.a(this.$refs.modal)}};const qr=r()($r,[["render",Fr]]);var Ar=qr,zr={components:{pagination:ic,OrderModal:Br,DelOrderModal:Ar,Loading:fe.a},data:function(){return{pagination:null,orders:[],tempOrder:{},isLoading:!1}},methods:{getOrders:function(){var e=arguments,t=this;return Object(He["a"])(regeneratorRuntime.mark((function n(){var c,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c=e.length>0&&void 0!==e[0]?e[0]:1,t.isLoading=!0,o="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ashen","/admin/orders?page=").concat(c),n.next=5,A.a.get(o).then((function(e){console.log("Orders 更新成功"),t.orders=e.data.orders,t.pagination=e.data.pagination})).catch((function(e){console.dir(e.response)}));case 5:t.$refs.orderModal.hideModal(),t.$refs.delModel.hideModal(),t.isLoading=!1;case 8:case"end":return n.stop()}}),n)})))()},openOrder:function(e){this.tempOrder=e,this.$refs.orderModal.openModal()},updateOrder:function(e){var t=this;return Object(He["a"])(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.isLoading=!0,console.log(e.id),c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ashen","/admin/order/").concat(e.id),n.next=5,A.a.put(c,{data:e}).then((function(e){console.log(e)})).catch((function(e){console.dir(e)}));case 5:return n.next=7,t.getOrders();case 7:t.isLoading=!1;case 8:case"end":return n.stop()}}),n)})))()},openDelOrder:function(e){this.tempOrder=e,this.$refs.delModel.openModal()},delOrder:function(e){var t=this;return Object(He["a"])(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.isLoading=!0,c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("ashen","/admin/order/").concat(e.id),n.next=4,A.a.delete(c).then((function(e){console.log(e.data.message),t.getOrders()})).catch((function(e){console.error(e.response.data.message)}));case 4:t.isLoading=!1;case 5:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.getOrders()}};const Jr=r()(zr,[["render",qa]]);var Hr=Jr,Wr=[{path:"/",name:"Layout",component:function(){return n.e("chunk-079a5944").then(n.bind(null,"e6aa"))},children:[{path:"",name:"home",component:j},{path:"/about",name:"about",component:N},{path:"/Products",name:"Products",component:we},{path:"/Product/:id",name:"Product",component:function(){return n.e("chunk-2016e538").then(n.bind(null,"0052"))}},{path:"/Cart",name:"Cart",component:Bt}]},{path:"/Login",name:"Login",component:tn},{path:"/admin",name:"Dashboard",component:Un,children:[{path:"",name:"BackEndHome",component:an},{path:"products",name:"products",component:Co},{path:"Coupons",name:"Coupons",component:Ca},{path:"Orders",name:"Orders",component:Hr}]}],Kr=Object(s["a"])({history:Object(s["b"])(),routes:Wr}),Yr=Kr,Gr=n("5502"),Qr=Object(Gr["a"])({state:{},mutations:{},actions:{},modules:{}}),Xr=Object(c["createApp"])(i);Xr.use(Qr).use(Yr).mount("#app")},"723b":function(e,t,n){"use strict";n("996f")},"795b":function(e,t,n){},"83ce":function(e,t,n){"use strict";var c=n("f34b"),o=n.n(c);n.d(t,"default",(function(){return o.a}))},"890e":function(e,t,n){},"958f":function(e,t,n){"use strict";n("ff06")},"996f":function(e,t,n){},ac19:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var c=n("7a23"),o={class:"container"},a=Object(c["createElementVNode"])("h1",null,"預計為首頁的頁面",-1),r=[a];function l(e,t,n,a,l,d){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",o,r)}},b14e:function(e,t,n){"use strict";n("ef4d")},c901:function(e,t,n){"use strict";n("795b")},d3c6:function(e,t,n){"use strict";n("890e")},ef4d:function(e,t,n){},f34b:function(e,t){},f3f6:function(e,t,n){},fdab:function(e,t,n){"use strict";var c=n("ac19"),o=n("83ce"),a=n("d959"),r=n.n(a);const l=r()(o["default"],[["render",c["a"]]]);t["default"]=l},ff06:function(e,t,n){}});
//# sourceMappingURL=app.5c15e983.js.map